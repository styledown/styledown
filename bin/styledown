#!/usr/bin/env node
Styledown = require('..');

if (process.argv.indexOf('--css') > -1) {
  process.stdout.write(require('fs').readFileSync(__dirname + '/../data/styledown.css'));

} else {
  readStdin(function (err, data) {
    var html = Styledown.parse(data);
    process.stdout.write(html + "\n");
  });
}

function readStdin (fn) {
  process.stdin.resume(); /* paused by default */
  process.stdin.setEncoding('utf8');

  var data = '';
  process.stdin.on('data', function(chunk) { data += chunk.toString(); });
  process.stdin.on('end', function() { fn(null, data); });
}
